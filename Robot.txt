plant VehicleMovement:
    controllable start, stop;

    location idle:
        initial;
        edge start goto move;
    location move:
        edge stop goto idle;
end

plant AuxilaryMovements:
    controllable rotate, stoprotate;

    location NoRotation:
        initial;
        edge rotate goto Rotation;
    location Rotation:
        edge stoprotate goto NoRotation;
end

plant VehicleLever:
    controllable raising, lowering;

    location low:
        initial;
        edge raising goto high;
    location high:
        edge lowering goto low;
end

plant ObstacleSensor:
    uncontrollable TurningOn, TurningOff;
    location off:
        initial; marked;
        edge TurningOn goto on;
    location on:
        edge TurningOff goto off;
end

plant TouchSensor:
    uncontrollable TurningOn, TurningOff;
    location off:
        initial; marked;
        edge TurningOn goto on;
    location on:
        edge TurningOff goto off;
end

plant BatteryLevel:
    uncontrollable Increase, Decrease, Replace;
    location full:
    initial; marked;
        edge Decrease goto low;
    location low:
        edge Increase goto full;
        edge Decrease goto critical;
    location critical:
        edge Replace goto full;
end

plant ChargingSystem:
    controllable StartCharging, StopCharging;
    location idle:
    initial; marked;
        edge StartCharging goto Charging;
    location Charging:
        edge StopCharging goto idle;
end

requirement RotateOnlyWhenVehicleIsNotMoving:
    location idle:
        initial;
        marked;
            edge VehicleMovement.start when AuxilaryMovements.NoRotation = true and ObstacleSensor.off = true and TouchSensor.off = true goto move;
            edge VehicleLever.raising when AuxilaryMovements.NoRotation = true and VehicleMovement.idle = true;
            edge VehicleLever.lowering when AuxilaryMovements.NoRotation = true and VehicleMovement.idle = true ;
            edge AuxilaryMovements.rotate;
            edge AuxilaryMovements.stoprotate;
    location move:
            edge VehicleMovement.stop goto idle;
end

requirement StopVehicleMovementsWhenCharging:
    location idle:
    initial;
        edge VehicleMovement.start when ChargingSystem.idle = true goto movement;
        edge AuxilaryMovements.rotate when ChargingSystem.idle = true;
        edge VehicleLever.raising when ChargingSystem.idle = true;
        edge VehicleLever.lowering when ChargingSystem.idle = true;
    location movement:
        edge VehicleMovement.stop goto idle;
        edge AuxilaryMovements.stoprotate goto idle;
end

requirement ChargeWhenVehicleisIdle:
    location idle:
    initial;marked;
        edge ChargingSystem.StartCharging when VehicleMovement.idle = true goto charging;
    location charging:
        edge ChargingSystem.StopCharging goto idle;
end

requirement ChargeWhenBatteryIsLow:
    location idle:
    initial;marked;
        edge ChargingSystem.StartCharging when BatteryLevel.low = true goto charging;
    location charging:
        edge ChargingSystem.StopCharging when BatteryLevel.full = true goto idle;
end

requirement StopVehicleMovementsWhenBatteryIsCritical:
    location idle:
    initial; marked;
        edge VehicleMovement.start when BatteryLevel.critical = false goto movement;
        edge AuxilaryMovements.rotate when BatteryLevel.critical = false goto movement;
        edge VehicleLever.raising when BatteryLevel.critical = false goto movement;
        edge VehicleLever.lowering when BatteryLevel.critical = false goto movement;
    location movement:
        edge VehicleMovement.start when BatteryLevel.critical = true goto idle;
        edge AuxilaryMovements.rotate when BatteryLevel.critical = true goto idle;
        edge VehicleLever.raising when BatteryLevel.critical = true goto idle;
        edge VehicleLever.lowering when BatteryLevel.critical = true goto idle;
end

requirement BatteryLevelIncreaseWhenCharging:
    location full:
        initial; marked;
        edge BatteryLevel.Decrease when ChargingSystem.Charging = false goto low;
    location low:
        edge BatteryLevel.Increase when ChargingSystem.Charging = true goto full;
        edge BatteryLevel.Decrease when ChargingSystem.Charging = false;

end


